<template>
    <div role="grid"
         class="slds-grid slds-wrap">

        <template if:true={isLoading}>
            <lightning-spinner alternative-text="tab is loading">
            </lightning-spinner>
        </template>

        <div role="panel"
             class="slds-size_1-of-1 slds-medium-size_3-of-12 slds-large-size_3-of-12 slds-p-around_large slds-border_right">
            <h2 class="slds-text-heading_small slds-p-bottom_small">Select Batch Fields</h2>
            <p class="slds-text-body_small slds-p-bottom_small">
                Select the fields for capturing batch information. Manage these fields in the NPSP Batch Data
                Import settings in Object Manager.
            </p>

            <template for:each={batchFields}
                      for:item="field">
                <lightning-input key={field.apiName}
                                 class="slds-truncate"
                                 type="checkbox"
                                 label={field.label}
                                 value={field.apiName}
                                 onchange={handleToggleBatchField}
                                 title={field.label}
                                 checked={field.checked}
                                 required={field.required}
                                 disabled={field.isRequiredFieldDisabled}
                                 data-type={field.dataType}>
                </lightning-input>
            </template>

        </div>

        <div role="panel"
             class="slds-size_1-of-1 slds-medium-size_9-of-12 slds-large-size_9-of-12 slds-p-around_large slds-border_left">

            <div role="grid"
                 class="slds-grid slds-wrap slds-grid_vertical-align-end">

                <div role="row"
                     class="slds-size_1-of-1 slds-p-bottom_small">
                    <h2 class="slds-text-heading_small slds-p-bottom_small">Set Batch Field Values</h2>
                    <p class="slds-text-body_small">
                        Mark require batch fields and enable default values for user input. Please note that
                        any default values can be overwritten by the gift entry user. Reorder fields by using
                        the arrow icons on the right.
                    </p>
                </div>

                <div role="row"
                     class="slds-size_1-of-1 slds-p-bottom_small">
                    <div role="grid"
                         class="slds-grid slds-grid_vertical-align-center">
                        <div class="slds-size_5-of-12">
                            Field Label
                        </div>
                        <div class="slds-size_1-of-12">
                            Required
                        </div>
                        <div class="slds-size_5-of-12">
                            Default Value
                        </div>
                        <div class="slds-size_1-of-12">
                        </div>
                    </div>

                    <template iterator:it={selectedBatchFields}>
                        <c-ge-template-builder-form-field key={it.value.apiName}
                                                          field={it.value}
                                                          is-first={it.first}
                                                          is-last={it.last}
                                                          onupdatepicklistoptions={handleUpdateBatchHeaderField}
                                                          onformelementup={handleFormElementUp}
                                                          onformelementdown={handleFormElementDown}
                                                          onupdateformelement={handleUpdateBatchHeaderField}
                                                          ondeleteformelement={handleDeleteBatchHeaderField}>
                        </c-ge-template-builder-form-field>
                    </template>

                </div>
            </div>
        </div>
    </div>
</template>
